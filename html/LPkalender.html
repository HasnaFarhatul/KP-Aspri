<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalender Setoran</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      background-color: #dfe4f0;
      font-family: 'Poppins', sans-serif;
    }
    /* NAVBAR & MENU */
    body {
        font-family: 'Poppins', sans-serif;
    }

    .login-background {
        background: url("../foto/Bg.png");
        background-size: cover;
    }

    .search-form {
        display: flex;
        position: relative;
        width: 300px;
    }

    .search-input {
        width: 100%;
        padding: 10px 45px 10px 15px;
        border: 1px solid rgb(255, 255, 255);
        border-radius: 20px;
        background-color: rgba(255, 255, 255, 0);
        color: white;
        outline: none;
    }

    .search-icon {
        position: absolute;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
        width: 20px;
        height: 20px;
        pointer-events: none;
    }

    .menu-container {
        position: absolute;
        top: 20px;
        left: 20px;
        display: flex;
        align-items: center;
        z-index: 1000;
        margin-top: 70px;
    }

    .menu-toggle {
        background: none;
        border: none;
        font-size: 24px;
        color: white;
        cursor: pointer;
        height: 40px;
    }

    .menu-items {
        display: flex;
        overflow: hidden;
        max-width: 0;
        transition: max-width 0.3s ease;
        padding: 10px;
        border-radius: 8px;
        gap: 10px;
    }

    .menu-items a {
        margin-left: 10px;
    }

    .menu-items a img {
        width: 40px;
        height: 40px;
    }

    .card-section {
        border-radius: 12px;
        background-color: #e0e0e0;
        padding: 20px;
        margin-bottom: 40px;
    }

    /* KALENDER */
    .calendar-container {
      max-width: 750px;
      margin: 150px auto 40px; 
      text-align: center;
    }
    .calendar-title {
      font-size: 14px;
      font-weight: 500;
      color: #2a4bb8;
      letter-spacing: 1px;
    }
    .calendar-month {
      font-size: 18px;
      font-weight: 700;
      color: #2a4bb8;
      margin: 10px 0 25px;
    }
    .calendar-header {
      font-size: 12px;
      font-weight: 500;
      color: #2a4bb8;
      text-align: center;
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 12px;
    }
    .day-box {
      aspect-ratio: 1 / 1;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0px 2px 4px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }
    .day-box.highlight {
      background: #2a4bb8;
      color: #fff;
      font-weight: bold;
    }
    .day-empty {
      aspect-ratio: 1 / 1;
      background: transparent;
      border: 1px solid #2a4bb8;
      border-radius: 12px;
    }
    .income {
      font-size: 10px;
      margin-top: 3px;
    }
    .total-income {
      margin-top: 20px;
      font-weight: bold;
      font-size: 16px;
      color: #00385a;
    }
    .btn-lainnya {
      margin-top: 10px;
      padding: 10px 20px;
      border-radius: 8px;
      background-color: #2a4bb8;
      color: #fff;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <nav class="navbar login-background bg-body-tertiary fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand logo-img">
        <img src="../foto/LogoAspri.png" alt="Aspri"/>
      </a>
      <form class="justify-content-center search-form" role="search">
        <input class="search-input text-white" type="search" placeholder="Cari" aria-label="Search" />
        <img src="../foto/search.png" alt="Search" class="search-icon" />
      </form>
      <a href="detailprof.html">
        <img src="../foto/Logoprofile2.png" Alt="Lihat Profil" title="Lihat Profile"/>
      </a>
    </div>
  </nav>
  <div class="menu-container">
    <button class="menu-toggle" onclick="toggleMenu()"><img src="../foto/menu.png"/></button>
    <div class="menu-items" id="menuItems">
      <a href="dashboard.html"><img src="../foto/Home.png" alt="Home" title="Dashboard" /></a>
      <a href="jukir.html"><img src="../foto/accessibility.png" alt="Profile" title="Juru Parkir"/></a>
      <a href="KRinput.html"><img src="../foto/Check circle.png" alt="Kasbon Retribusi" /></a>
      <a href="pemsurattugas.html"><img src="../foto/File.png" alt="Pembuatan Surat Tugas" /></a>
      <div class="btn-group dropend">
        <button type="button" class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="../foto/Book open.png" alt="Laporan Pendapatan"/>
        </button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="LPkalender.html">Kalender Setoran</a></li>
          <li><a class="dropdown-item" href="LPsetoranharian.html">Setoran Harian</a></li>
        </ul>
      </div>
      <a href="../Admin/datajukir.html"><img src="../foto/User plus.png" alt="Data Juru Parkir"/></a>
      <a href="../Admin/datapengguna.html"><img src="../foto/Users.png" alt="Data Pengguna Aplikasi"/></a>
      <a href="../Admin/rekapdata.html"><img src="../foto/Clipboard.png" alt="Rekap Data Kolektor"/></a>
      <a href="../Admin/datalokasi.html"><img src="../foto/location_on.png" alt="Data Lokasi"/></a>
    </div>
  </div>
  <div class="calendar-container">
    <div class="calendar-title">KALENDER SETORAN</div>
    <div class="d-flex justify-content-between align-items-center">
      <div class="nav-btn" onclick="prevMonth()">&lt;</div>
      <div class="calendar-month" id="monthYear"></div>
      <div class="nav-btn" onclick="nextMonth()">&gt;</div>
    </div>
    <div class="calendar-grid mt-3 mb-3">
      <div class="calendar-header">MINGGU</div>
      <div class="calendar-header">SENIN</div>
      <div class="calendar-header">SELASA</div>
      <div class="calendar-header">RABU</div>
      <div class="calendar-header">KAMIS</div>
      <div class="calendar-header">JUMAT</div>
      <div class="calendar-header">SABTU</div>
    </div>
    <div class="calendar-grid" id="calendarDays"></div>
    <div class="total-income" id="totalIncome"></div>
    <button class="btn-lainnya" onclick="showPopup()">Lainnya</button>
  </div>
  <div class="modal fade" id="popupModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-4">
        <h5 class="mb-3">Pendapatan Tahunan</h5>
        <ul id="yearlyIncome"></ul>
        <button type="button" class="btn btn-secondary mt-3" data-bs-dismiss="modal">Tutup</button>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let isMenuOpen = false;
    function toggleMenu() {
      const menu = document.getElementById("menuItems");
      isMenuOpen = !isMenuOpen;
      menu.style.maxWidth = isMenuOpen ? "600px" : "0";
    }

    const monthNames = [
      "Januari","Februari","Maret","April","Mei","Juni",
      "Juli","Agustus","September","Oktober","November","Desember"
    ];
    let currentDate = new Date(2025, 7);

    const monthlyIncome = {
      Januari: 120000,
      Februari: 150000,
      Maret: 170000,
      April: 200000,
      Mei: 180000,
      Juni: 160000,
      Juli: 190000,
      Agustus: 250000,
      September: 220000,
      Oktober: 210000,
      November: 230000,
      Desember: 300000
    };

    function renderCalendar(date) {
      const month = date.getMonth();
      const year = date.getFullYear();
      document.getElementById("monthYear").innerText = monthNames[month] + " " + year;

      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month+1, 0).getDate();

      const calendarDays = document.getElementById("calendarDays");
      calendarDays.innerHTML = "";

      let total = 0;

      for (let i = 0; i < firstDay; i++) {
        calendarDays.innerHTML += `<div class="day-empty"></div>`;
      }

      for (let d = 1; d <= daysInMonth; d++) {
        let pendapatan = "";
        let highlight = "";
        if (d <= 5) {
          highlight = "highlight";
          pendapatan = `<div class="income">Rp ${(d*10000).toLocaleString()}</div>`;
          total += d*10000;
        }
        calendarDays.innerHTML += `<div class="day-box ${highlight}">${d}${pendapatan}</div>`;
      }

      document.getElementById("totalIncome").innerText = "Total Pendapatan: Rp " + total.toLocaleString();
    }

    function prevMonth() {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar(currentDate);
    }
    function nextMonth() {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar(currentDate);
    }

    function showPopup() {
      const yearlyList = document.getElementById("yearlyIncome");
      yearlyList.innerHTML = "";
      for (const [bulan, pendapatan] of Object.entries(monthlyIncome)) {
        yearlyList.innerHTML += `<li>${bulan}: Rp ${pendapatan.toLocaleString()}</li>`;
      }
      new bootstrap.Modal(document.getElementById('popupModal')).show();
    }

    renderCalendar(currentDate);
  </script>
</body>
</html>
